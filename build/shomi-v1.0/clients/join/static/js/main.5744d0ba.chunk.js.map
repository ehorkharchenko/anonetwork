{"version":3,"sources":["Entry/Point.module.css","Entry/Point.tsx","index.tsx"],"names":["module","exports","socket","io","path","Entry","useState","undefined","current","inputType","warn","anonym","name","key","agree","complete","data","setData","console","log","window","location","pathname","input","React","createRef","exact","className","css","label","onClick","by","render","props","join","ref","inp","type","placeholder","e","next","value","length","story","val","alert","substr","symbols","numbers","lettersCapitalize","i","symbol","test","valid","push","history","head","rules","rulInner","rulIf","href","footer","accept","emit","completeData","deny","done","yourdata","to","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5744d0ba.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"warn\":\"Point_warn__2CmMC\",\"label\":\"Point_label__3EJW2\",\"label-btn\":\"Point_label-btn__uiID4\",\"by\":\"Point_by__2a4vH\",\"join\":\"Point_join__2aLMV\",\"inp\":\"Point_inp__eVCcy\",\"next\":\"Point_next__3yYjM\",\"terms-of-use\":\"Point_terms-of-use__174KA\",\"head\":\"Point_head__17tLd\",\"rules\":\"Point_rules__2ojn3\",\"rulInner\":\"Point_rulInner__2cOip\",\"rulIf\":\"Point_rulIf__1Xlzj\",\"terms-of-use-read-rule\":\"Point_terms-of-use-read-rule__2NcrU\",\"footer\":\"Point_footer__1tYdY\",\"accept\":\"Point_accept__3LjQ2\",\"deny\":\"Point_deny__1yHuA\",\"done\":\"Point_done__266C4\",\"yourdata\":\"Point_yourdata__236HL\"};","import React, { useState } from 'react'\nimport css from './Point.module.css'\n\nimport { BrowserRouter as Router, Route, Redirect } from 'react-router-dom'\n\nimport io from 'socket.io-client'\nconst socket = io('http://join.localhost:3000', { path: '/api'})\n\nfunction Entry () {\n\n  // state data\n  const [ current, setCurrent ]: any = useState(0)\n  const [ s, sets ]: any = useState([ 1, '', { 'anonym name': undefined, 'secure key': undefined } ])\n  const [ authData, setAuthData ]: any = useState(null)\n\n  const [ data, setData ]: any = useState({\n    current: 1,\n    inputType: true,\n    warn: null,\n    anonym: {\n      name: undefined,\n      key: undefined\n    },\n    agree: false,\n    complete: null\n  })\n\n  console.log(data)\n\n  const next = (story: any) => {\n      \n    const val: string = input.current.value\n\n    if (data.current === 1) {\n\n      if (2 <= val.length && val.length <= 20) {\n\n        setData( (e: any) => ({\n          ...e,\n          current: 2,\n          anonym: {\n            ...e.anonym,\n            name: val\n          }\n        }))\n\n        input.current.value = ''\n\n        return 0;\n\n      } else {\n          \n          if (2 > val.length) {\n            \n            input.current.value = ''\n            alert('Minimum name length 2 symbols')\n\n          } else if (val.length > 20) {\n              \n              input.current.value = val.substr(0, 20)\n              alert('Maximum name length 20 symbols')\n\n          } else {\n            \n              input.current.value = ''\n              alert('Unknown error')\n            }\n        }\n      \n    } else if (data.current === 2) {\n\n        function valid (): boolean {\n          \n          let [ symbols, numbers, lettersCapitalize, letters ] = [ 0, 0, 0, 0 ]\n\n          for (let i = 0; i <= val.length; i++) {\n            \n            const symbol: string = val.substr(i, 1)\n\n            if (/[~`!#$%\\^&*+=\\-\\[\\]\\\\';,/{}|\\\\\":<>\\?]/.test(symbol))\n              ++symbols\n\n            else if (/[ABCDEFGHIJKLMNOPQRSTUVWXYZ]/.test(symbol))\n              ++lettersCapitalize\n\n            else if (/[1234567890]/.test(symbol))\n              ++numbers\n\n            else if (/[abcdefghijklmnopqrstuvwxyz]/.test(symbol))\n              ++letters\n\n          }\n\n          if (1 <= symbols && 2 <= numbers && 2 <= lettersCapitalize)\n            return true\n          \n          else\n            return false\n        }\n\n      if (15 <= val.length || ( 8 <= val.length && valid() ) ) {\n        \n        // setData([data[0] += 1, data[1], {\n        //   'anonym name': data[2]['anonym name'],\n        //   'secure key': val\n        // }])\n\n        setData((e: any) => ({\n          ...e,\n          current: 3,\n          inputType: true,\n          anonym: {\n            ...e.anonym,\n            key: val\n          } \n        }))\n\n        input.current.value = ''\n\n        return 0;\n\n      } else {\n        \n          input.current.value = ''\n          alert('Minimum secure key length 15 symbols or 8 symbols with 1 special symbol, 2 digits and 2 capital letters')\n        }\n\n    } else if (data.current === 3) {\n      \n        if (val === data.anonym.key) {\n          \n          input.current.value = ''\n          story.push('/terms-of-use')\n\n        } else {\n\n            setData( (e: any) => ({\n              ...e,\n              current: e.current - 1\n            }))\n            alert('Security key does not match')\n          }\n\n    } else\n        return 0;\n\n  }\n  \n  // Router\n  const path = window.location.pathname\n  const input: any = React.createRef()\n  const btnShowAndHide: any = React.createRef()\n\n  if (\n    path === '/' || path === '/form' ||\n    path === 'terms-of-use' || path === '/done'\n  )\n    return (\n      <Router>\n        <Route exact path='/'>\n          <div className={css.label}>\n            <button className={css['label-btn']}\n                    onClick={ () => window.location.pathname = '/form' }>\n              <span> Join </span>\n            </button>\n            <span className={css.by}> Created by Shomi </span>\n          </div>\n        </Route>\n        <Route exact path='/form' render={ (props: any) => (\n          <div className={css.join}>\n            {\n              (data.current === 1) ?\n              (\n                <input ref={input} className={css.inp} \n                       type='text' placeholder='anonym name' />\n              ):\n              (\n                <div>\n                  <input ref={input} type={data.inputType ? 'password': 'text'}\n                         placeholder={ (data.current === 2) ? 'secure key': 'confirm key' } />\n                  <button className={css['btn-show-and-hide']}\n                          onClick={ () => {\n\n                            setData((e: any) => ({\n                              ...e,\n                              inputType: !e.inputType\n                            }))\n\n                          }}>\n                    <span> { data.inputType ? 'show': 'hide' } </span>\n                  </button>\n                </div>\n              )\n            }\n            <button className={css.next} \n                    onClick={ () => (input.current.value.length > 0) ? next(props.history): alert('Empty input') }>\n            <span> next </span>\n          </button>\n        </div>\n        )} />\n        <Route exact path='/terms-of-use' render={ (props: any) => \n          (\n            <div className={css['terms-of-use']}>\n              <span className={css.head}> terms of use </span>\n              <div className={css.rules}>\n                <div className={css.rulInner}>\n                  <p className={css.rulIf}>\n                    To use Soume, You must <br />\n                    agree to the Soume <br /> \n                    Terms of Use\n                  </p>\n                  <div className={css['terms-of-use-read-rule']}\n                        onClick={ () => window.location.href = 'http://help.shomi.ml/terms-of-use' }>\n                    <span> READ TERMS OF USE  </span>\n                  </div>\n                </div>\n              </div>\n              <div className={css.footer}>\n                <button className={css.accept}\n                        onClick={ () => { \n                          props.history.push('/done')\n                          setData((e: any) => ({\n                            ...e,\n                            agree: true\n                          }))\n\n                          socket.emit('join', data.anonym, function (completeData: any) {\n                            \n                            setData( (e: any) => ({\n                              ...e,\n                              complete: completeData\n                            }) )\n\n                          })\n\n                        }}> ACCEPT </button>\n                <button className={css.deny}\n                        onClick={ () => { \n                          props.history.push('/done')\n                        }}> DENY </button>\n              </div>\n            </div>\n          )\n\n        } />\n        <Route exact path='/done'>\n          <div className={css.done}>\n            {\n              (data.agree) ?\n                (data.complete !== null) ? \n                  (data.complete !== false) ? \n                    <div className={css.yourdata}>\n                      <span> Your data for auth </span>\n                      <div>\n                        <span>{ data.complete['anonym name'] }</span>\n                        <span>#</span>\n                        <span>{ data.complete['anonym id']   }</span>\n                      </div>\n                    </div>:\n                    <span> Failed </span>:\n                <span> Please wait .. </span>: \n              <span> rejected </span>\n            }\n            <button className={css['done-button-okey']}\n                    onClick={ () => window.location.href = 'http://shomi.ml' }>\n              <span> okey </span>\n            </button>\n          </div>\n        </Route>\n        <div className={css.warn}>\n          <span> { data[1] } </span>\n        </div>\n      </Router>\n    )\n    \n  else\n    return (\n      <Router>\n        <Redirect to='/' />\n      </Router>\n    )\n}\n\nexport default Entry\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './idx.css'\nimport Entry from './Entry/Point'\n\nReactDOM.render(\n    <React.StrictMode>\n      <Entry/>\n    </React.StrictMode>,\n    document.getElementById('root')\n)\n"],"sourceRoot":""}